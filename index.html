<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="reset.css">
  <link rel="stylesheet" href="style.css">
  <title>Browser Adventure</title>
</head>


<body id="gameRoot">

  <p id="welcome">Welcome to Browser Adventure!</p>

  <img id="themeImage" src="img/bar.jpg" alt="Background Image">
  <br />
  
  <script>

    const gameState = {
      currentLocation: 'bar',
    }

    const UI = {
      setThemeImage: (image) => {
        const imageElement = document.getElementById('themeImage')
        imageElement.setAttribute("src", image)
      },
      setThemeButtons: (actions) => {
        // Clear existing buttons
        const existingButtons = Array.from(document.getElementsByClassName('action-button'))
        existingButtons.forEach(button => button.remove())

        // Find Root
        const bodyElement = document.getElementById("gameRoot")

        // Loop through actions
        actions.forEach(action => {
          const myButton = document.createElement('button')
          myButton.setAttribute("class", "block action-button")
          myButton.innerHTML = action.label
          myButton.addEventListener('click', action.action)
          bodyElement.append(myButton)
        })
      }
    }

    const GameManager = {
      setRoom: (room) => {
        UI.setThemeImage(room.image)
        UI.setThemeButtons(room.actions)
      }
    }

    const gameWorld = {
      bar: {
        image: "img/bar.jpg",
        actions: [
          {
            label: 'Drink a Beer',
            action: () => {
              console.log('Drinking beer')
            }
          },
          {
            label: 'Shout at Man',
            action: () => {
              console.log('Shouting')
            }
          },
          {
            label: 'Leave',
            action: () => {
              GameManager.setRoom(gameWorld.townsquare)
            }
          }
        ]
      },
      townsquare: {
        image: "img/townsquare.jpg",
        actions: [
          {
            label: 'Go for a drink',
            action: () => {
              GameManager.setRoom(gameWorld.bar)
            }
          }
        ]
      }
    }

    function startGame() {
      GameManager.setRoom(gameWorld[gameState.currentLocation])
    }

    document.onload = startGame();

  </script>

  <noscript>Sorry, your browser does not support JavaScript!</noscript>

</body>

</html>